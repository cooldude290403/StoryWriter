import tkinter as  tk
import json

# This function will print the final report when the user clicks genirate
def show_sel():
    selected_services = []
    for service, var in service_vars.items():
        #Checks if each box is ticked or not. returns a true or false
        if var.get():
            details = "\n".join(services_data[service]["details"])
            selected_services.append(f"{service}:\n{details}")
    print("Selected Services: \n" + "\n\n".join(selected_services))  

# This funtion now reads the sevice names and service details from a single json file
def read_services_from_json(file_path):
    with open(file_path, 'r') as file:
        return json.load(file)
    
# This function displays the menu that the user picks make and model from
#def select_make_and_model():
    
# This makes the main window and titles it
root = tk.Tk()
root.title("Service Report Generator")

# Pulls make and model data
make_model_data = read_services_from_json("brands")
make_model = list(make_model_data.keys())

make_model_var = {make: tk.BooleanVar() for make in make_model}

# Makes the tick boxes for make selection
for make in make_model:
    tk.Checkbutton(root, text=make, variable=make_model_var[make]).pack()

# Read services from a JSON file
services_data = read_services_from_json("services")
services = list(services_data.keys())

# Dictionary to hold BooleanVars for each service
service_vars = {service: tk.BooleanVar() for service in services}

# This is the code that makes all the tick boxes
for service in services:
    tk.Checkbutton(root, text=service, variable=service_vars[service]).pack()

submit_button = tk.Button(root, text="Generate Report", command=show_sel)
submit_button.pack()

root.mainloop()